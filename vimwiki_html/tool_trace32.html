<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>tool_trace32</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<h1>目录</h1>
<div class="toc">
<ul>
<li><a href="#toc_0.1">安装linux版本t32 sim</a>
<li><a href="#toc_0.2">安装windows版本trace32</a>
<li><a href="#toc_0.3">配置trace32 simulator</a>
<li><a href="#toc_0.4">使用技巧</a>
<ul>
<li><a href="#toc_0.4.1">加载命令</a>
<li><a href="#toc_0.4.2">Trace32快捷命令</a>
<li><a href="#toc_0.4.3">查看framebuffer内容</a>
</ul>
<li><a href="#toc_0.5">附件</a>
</ul>
</ul>
</div>

<hr />
<h2 id="toc_0.1">安装linux版本t32 sim</h2>
<pre>
将软件拷到本地
smb://10.0.0.166/public_folder/PLD/APPS/B2G/fresher/huafang/t32

将其变为可执行属性：
chmod -R 777 t32

根据t32/t32/readme下的提示，执行相应命令

执行t32/t32-a5.sh脚本即可

由于版本问题，有可能会提示出错，需将t32/libjpeg下的libjpeg.so.62文件拷到/usr/lib/x86_64-linux-gnu
sudo cp t32/libjpeg/libjpeg.so.62 /usr/lib/x86_64-linux-gnu
</pre>

<hr />
<h2 id="toc_0.2">安装windows版本trace32</h2>
<pre>
在Vmware的windows环境下安装，不用讲了吧
软件在
（版本较新）smb://leixiepc/sharedfile/software/NEW%20TRACE32
（版本较旧）smb://zhimingpc/ming/software/Trace32_201106

注：
由于Vmware对USB3.0支持有问题，所以我们组新买的3.0的trace没法使用，但是2.0口的可以用
</pre>

<hr />
<h2 id="toc_0.3">配置trace32 simulator</h2>
<pre>
其实simulator不用另外再安装，在USB版本基础上就可以配置

按照如下方式，可以添加simulator的配置
配完后，点start就可以使用
</pre>
<p>
<img src="file:///home/likewise-open/SPREADTRUM/hua.fang/vimwiki/vimwiki/images/1.bmp" /></BR>
<img src="file:///home/likewise-open/SPREADTRUM/hua.fang/vimwiki/vimwiki/images/2.bmp" />
</p>

<hr />
<h2 id="toc_0.4">使用技巧</h2>
<h3 id="toc_0.4.1">加载命令</h3>
<p>
0. 加载elf
</p>
<pre>
d.load.elf xxx\elf /nocode

xxx\elf为相应的符号表文件
</pre>
<p>
0. 加载binary
</p>
<pre>
d.load.binary xxx\binary 0xc0000000 /noclear

xxx\binary为相应的dump文件
0xc0000000为相应的加载地址，需跟dump文件对应，8-&gt;c
</pre>
<p>
0. 调试加载源代码
</p>
<pre>
symbol.SOURCEPATH.SETRECURSEDIR xxx

xxx为源代码路径
</pre>

<h3 id="toc_0.4.2">Trace32快捷命令</h3>
<table>
<tr>
<td>
<strong>shortcut</strong>
</td>
<td>
<strong>comment</strong>
</td>
</tr>
<tr>
<td>
F8
</td>
<td>
Break
</td>
</tr>
<tr>
<td>
F7
</td>
<td>
Run
</td>
</tr>
<tr>
<td>
F3
</td>
<td>
Step over call
</td>
</tr>
<tr>
<td>
F2
</td>
<td>
Step
</td>
</tr>
<tr>
<td>
F6
</td>
<td>
Go up
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
r
</td>
<td>
list registers
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
d.dump &lt;addr&gt;
</td>
<td>
dump content in address
</td>
</tr>
<tr>
<td>
d.la &lt;addr&gt;
</td>
<td>
list assemble
</td>
</tr>
<tr>
<td>
d.save.b &lt;file&gt; &lt;addr&gt;++&lt;len&gt;
</td>
<td>
save binary to file
</td>
</tr>
<tr>
<td>
d.p %y.l &lt;addr&gt;++&lt;len&gt;
</td>
<td>
dump symbol from specific address
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
v.v &lt;var&gt;
</td>
<td>
view content
</td>
</tr>
<tr>
<td>
v.w &lt;var&gt;
</td>
<td>
watch content
</td>
</tr>
<tr>
<td>
v.f
</td>
<td>
show current callstack
</td>
</tr>
<tr>
<td>
v.f /task &lt;task_ptr&gt;
</td>
<td>
show designated task's callstack
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
y.b [var]
</td>
<td>
show symbol info of var
</td>
</tr>
<tr>
<td>
y.l [addr]
</td>
<td>
show symbol info of address
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
b.s
</td>
<td>
set breakpoint
</td>
</tr>
<tr>
<td>
b.l
</td>
<td>
list breakpoint
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
TASK.DTask
</td>
<td>
show all tasks
</td>
</tr>
</table>

<h3 id="toc_0.4.3">查看framebuffer内容</h3>
<pre>
data.image 0xdd700000 480. 800. /RGB32
它的地址从registered_fb[0].fix.smem_start可以看到，它是物理地址，需要转到虚拟地址
也可以通过dispc_ctx也可以得到此地址
</pre>

<hr />
<h2 id="toc_0.5">附件</h2>
<p>
<a href="file:///home/likewise-open/SPREADTRUM/hua.fang/vimwiki/vimwiki/files/foreach_process.cmm">foreach_process.cmm</a></BR>
<a href="file:///home/likewise-open/SPREADTRUM/hua.fang/vimwiki/vimwiki/files/foreach_thread.cmm">foreach_thread.cmm</a></BR>
<a href="file:///home/likewise-open/SPREADTRUM/hua.fang/vimwiki/vimwiki/files/addr_page.cmm">addr_page.cmm</a></BR>
<a href="file:///home/likewise-open/SPREADTRUM/hua.fang/vimwiki/vimwiki/files/is_mem_freed.cmm">is_mem_freed.cmm</a></BR>
</p>

</body>
</html>
